<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/general.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/normalize.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">

    <title>TensorBrushAI</title>
</head>

<body>
    <header>
        <div id="inner-header">
            <button id="logo-button"><img src="{{ url_for('static', filename='resources/logos/tbai_logo_primary.png') }}" alt=""></button>
            <div id="workspace-buttons">
                <button id="compose-workspace-button" class="workspace-button"><img id="compose-workspace-button-img" src="{{ url_for('static', filename='resources/icons/create-image.png') }}" alt=""></button>
                <button id="transform-workspace-button" class="workspace-button"><img id="transform-workspace-button-img" src="{{ url_for('static', filename='resources/icons/paint-pallet.png') }}" alt=""></button>
                <button id="enhance-workspace-button" class="workspace-button"><img id="enhance-workspace-button-img" src="{{ url_for('static', filename='resources/icons/enhance-upscale.png') }}" alt=""></button>
            </div>
            <button id="preferences-button"><img id="preferences-icon"
                    src="{{ url_for('static', filename='resources/icons/preferences.png') }}"
                    alt="preferences icon"></button>
        </div>
    </header>
    <div id="progress-bar">
        <div id="progress-fill"></div>
    </div>
    <main>
        <!-- Left Control Panel -->
        <section id="left-panel" class="side-panel">
            <div id="prompting-container">
                <div class="textarea-wrapper">
                    <textarea name="positive-prompt" id="positive-prompt" rows="4" placeholder="Positive Prompt"></textarea>
                    <div class="resize-handle"></div>
                </div>

                <div class="textarea-wrapper">
                    <textarea name="negative-prompt" id="negative-prompt" rows="2" placeholder="Negative Prompt"></textarea>
                    <div class="resize-handle"></div>
                </div>
            </div>
            <div id="left-subpanel-2" class="side-subpanel">
                <div id="left-panel-header-2" class="side-panel-header">
                    <div class="side-panel-header-left">
                        <img src="{{ url_for('static', filename='resources/icons/chevron.png') }}" alt="open subpanel">
                        <p>General Settings</p>
                    </div>
                    <button id="reset-parameters-button" class="side-panel-header-button">Reset</button>
                </div>
                <div id="left-panel-content-2">

                    <!-- SCHEDULER INPUT -->
                    <!-- 
                    - Euler
                    - Euler Karras
                    - Euler Ancestral
                    - Heun
                    - Heun Karras
                    - DPM++ 2M
                    - DPM++ 2M Karras
                    - DPM++ 2M SDE
                    - DPM++ 2M SDE Karras
                    - K DPM 2
                    - K DPM 2 Karras
                    - K DPM 2 Ancestral
                    - UniPC 2M
                    - UniPC 2M Karras
                    - LMS
                    - LMS Karras
                    -->
                    <unicorn-select id="scheduler-input" title="Scheduler"
                        options="Euler, Euler Karras, Euler Ancestral, Heun, Heun Karras, DPM++ 2M, DPM++ 2M Karras, DPM++ 2M SDE, DPM++ 2M SDE Karras, K DPM 2, K DPM 2 Karras, K DPM 2 Ancestral, UniPC 2M, UniPC 2M Karras, LMS, LMS Karras"
                        value="DPM++ 2M Karras"></unicorn-select>

                    <!-- ITERATIONS SLIDER -->
                    <unicorn-float-range id="iterations-input" title="Iterations" min="1" max="100" step="1" value="28"
                        unit=""></unicorn-float-range>

                    <!-- GUIDANCE SLIDER -->
                    <unicorn-float-range id="guidance-input" title="Guidance" min="1" max="30" step="0.5" value="6"
                        unit=""></unicorn-float-range>

                    <!-- WIDTH SLIDER -->
                    <unicorn-float-range id="width-input" title="Width" min="320" max="1600" step="8" value="768"
                        unit="px"></unicorn-float-range>

                    <!-- HEIGHT SLIDER -->
                    <unicorn-float-range id="height-input" title="Height" min="320" max="1600" step="8" value="1024"
                        unit="px"></unicorn-float-range>

                    <!-- SEED INPUT -->
                    <div id="seed-container">
                        <h4 id="seed-label">Seed</h4>
                        <div id="seed-row-container">
                            <input type="number" id="seed-input" min="1" max="9223372036854775807" placeholder="Random">
                            <div id="seed-buttons">
                                <div id="recycle-button"><svg id="recycle-icon" xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 512 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                        <path
                                            d="M174.7 45.1C192.2 17 223 0 256 0s63.8 17 81.3 45.1l38.6 61.7 27-15.6c8.4-4.9 18.9-4.2 26.6 1.7s11.1 15.9 8.6 25.3l-23.4 87.4c-3.4 12.8-16.6 20.4-29.4 17l-87.4-23.4c-9.4-2.5-16.3-10.4-17.6-20s3.4-19.1 11.8-23.9l28.4-16.4L283 79c-5.8-9.3-16-15-27-15s-21.2 5.7-27 15l-17.5 28c-9.2 14.8-28.6 19.5-43.6 10.5c-15.3-9.2-20.2-29.2-10.7-44.4l17.5-28zM429.5 251.9c15-9 34.4-4.3 43.6 10.5l24.4 39.1c9.4 15.1 14.4 32.4 14.6 50.2c.3 53.1-42.7 96.4-95.8 96.4L320 448l0 32c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-64-64c-9.4-9.4-9.4-24.6 0-33.9l64-64c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 32 96.2 0c17.6 0 31.9-14.4 31.8-32c0-5.9-1.7-11.7-4.8-16.7l-24.4-39.1c-9.5-15.2-4.7-35.2 10.7-44.4zm-364.6-31L36 204.2c-8.4-4.9-13.1-14.3-11.8-23.9s8.2-17.5 17.6-20l87.4-23.4c12.8-3.4 26 4.2 29.4 17L182 241.2c2.5 9.4-.9 19.3-8.6 25.3s-18.2 6.6-26.6 1.7l-26.5-15.3L68.8 335.3c-3.1 5-4.8 10.8-4.8 16.7c-.1 17.6 14.2 32 31.8 32l32.2 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32.2 0C42.7 448-.3 404.8 0 351.6c.1-17.8 5.1-35.1 14.6-50.2l50.3-80.5z" />
                                    </svg></div>
                                <div id="random-button"><svg id="dice-icon" xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 640 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                        <path
                                            d="M274.9 34.3c-28.1-28.1-73.7-28.1-101.8 0L34.3 173.1c-28.1 28.1-28.1 73.7 0 101.8L173.1 413.7c28.1 28.1 73.7 28.1 101.8 0L413.7 274.9c28.1-28.1 28.1-73.7 0-101.8L274.9 34.3zM200 224a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM96 200a24 24 0 1 1 0 48 24 24 0 1 1 0-48zM224 376a24 24 0 1 1 0-48 24 24 0 1 1 0 48zM352 200a24 24 0 1 1 0 48 24 24 0 1 1 0-48zM224 120a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm96 328c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-192c0-35.3-28.7-64-64-64l-114.3 0c11.6 36 3.1 77-25.4 105.5L320 413.8l0 34.2zM480 328a24 24 0 1 1 0 48 24 24 0 1 1 0-48z" />
                                    </svg></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <span class="resizer" id="resizer-left"></span>
        <button id="toggle-left-panel"><img src="{{ url_for('static', filename='resources/icons/chevron.png') }}"
                alt="open left panel"></button>

        <!-- Workspaces -->
        <section id="compose-workspace" class="middle-panel">
            <div id="compose-workspace-header" class="workspace-header">
                <div class="workspace-header-left">
                    <button id="generate-button">COMPOSE</button>
                    <button id="queue-button"><img id="queue-icon"
                            src="{{ url_for('static', filename='resources/icons/queue.png') }}"
                            alt="queue icon"><div id="queue-counter"></div></button>
                    <button id="cancel-button">Cancel</button>
                </div>
                <div class="workspace-header-right">
                </div>
            </div>
            <div id="compose-workspace-canvas"></div>
            <div id="image-sizer"></div>
            <img id="compose-image" src="" alt="">
            </div>
            <div id="compose-workspace-footer" class="workspace-footer">
                <div class="workspace-footer-left">
                    <button id="reuse-parameters-button">Reuse Parameters</button>
                    <button id="view-metadata-button">View Metadata</button>
                </div>
                <div class="workspace-footer-right">
                    <button id="reset-image-size-button">Reset View</button>
                </div>
            </div>
        </section>
        <section id="transform-workspace" class="middle-panel">
            <div id="transform-workspace-header" class="workspace-header">
                <div class="workspace-header-left">
                    <button id="transform-generate-button">TRANSFORM</button>
                </div>
                <div class="workspace-header-right">
                </div>
            </div>
            <canvas id="transform-workspace-canvas"></canvas>
            <div id="transform-workspace-footer" class="workspace-footer">
                <button id="view-mask-button">View Mask</button>
                <div class="workspace-footer-middle">
                    <button id="mask-tools-button">MASK</button>
                    <button id="draw-tools-button">DRAW</button>
                </div>
                <button id="transform-reset-image-size-button">Reset View</button>
            </div>
        </section>
        <section id="enhance-workspace" class="middle-panel">
            <div id="enhance-workspace-header" class="workspace-header"></div>
            <div id="enhance-workspace-footer" class="workspace-footer"></div>
        </section>

        <!-- Right Control Panel -->
        <button id="toggle-right-panel"><img src="{{ url_for('static', filename='resources/icons/chevron.png') }}"
                alt="open left panel"></button>
        <span class="resizer" id="resizer-right"></span>
        <section id="right-panel" class="side-panel">
            <div id="right-subpanel-1" class="side-subpanel">
                <div id="right-panel-header-1" class="side-panel-header">
                    <div class="side-panel-header-left">
                        <img src="{{ url_for('static', filename='resources/icons/chevron.png') }}" alt="open subpanel">
                        <p>Models & LoRAs</p>
                    </div>
                    <button id="manage-models-button" class="side-panel-header-button">Manage</button>
                </div>
                <div id="right-panel-content-1" class="pos-2">
                    <!-- MAIN MODEL INPUT -->
                    <unicorn-select id="model-input" title="Model" options="" value="EpicRealismXL-V8-KiSS"></unicorn-select>
                    <!-- LORA MODEL INPUT -->
                    <unicorn-select-expand id="lora-input" title="LoRAs" min="-2" max="2" step="0.1" value="0.7" unit=""
                        options=""></unicorn-select-expand>
                </div>
            </div>
            <div id="right-subpanel-2" class="side-subpanel">
                <div id="right-panel-header-2" class="side-panel-header">
                    <div class="side-panel-header-left">
                        <img src="{{ url_for('static', filename='resources/icons/chevron.png') }}" alt="open subpanel">
                        <p>Image Gallery</p>
                    </div>
                    <div id="gallery-controls">
                        <button id="thumbnail-size-down-button" class="gallery-button" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 448 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                <path
                                    d="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z" />
                            </svg>
                        </button>
                        <button id="thumbnail-size-up-button" class="gallery-button" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 448 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                <path
                                    d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z" />
                            </svg>
                        </button>
                        <button id="image-albums-button" class="side-panel-header-button">Albums</button>
                    </div>
                </div>
                <div id="right-panel-content-2">
                    <div id="image-gallery">
                        <div id="view-latent-previews" class="image-gallery-item" onclick="selectLatentPreviewItem()">
                            <div class="spinner-container" id="spinner-container">
                                <div class="spinner"></div>
                                <p id="generation-percentage">0%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="context-menu" class="context-menu">
                <ul>
                    <li id="delete-image">Delete Image</li>
                </ul>
            </div>
        </section>

    </main>

    <!-- Queue, Settings, Models, Templates, Albums - MODALS -->
    <div id="dim-viewport"></div>
    <div id="queue-container" class="">
        <div id="queue-header">
            <p id="queue-etc">ETC:</p>
            <button id="cancel-queue">Cancel All</button>
        </div>
        <div class="queue-item">
            <div class="queued-item-data">
                <p class="queued-item-index">1.</p>
                <button class="queued-item-info primary-text">Item Info</button>
            </div>
            <button class="cancel-queued-item">Cancel</button>
        </div>
        <div class="queue-item">
            <div class="queued-item-data">
                <p class="queued-item-index">2.</p>
                <button class="queued-item-info primary-text">Item Info</button>
            </div>
            <button class="cancel-queued-item">Cancel</button>
        </div>
        <div class="queue-item">
            <div class="queued-item-data">
                <p class="queued-item-index">3.</p>
                <button class="queued-item-info primary-text">Item Info</button>
            </div>
            <button class="cancel-queued-item">Cancel</button>
        </div>
        <div class="queue-item">
            <div class="queued-item-data">
                <p class="queued-item-index">4.</p>
                <button class="queued-item-info primary-text">Item Info</button>
            </div>
            <button class="cancel-queued-item">Cancel</button>
        </div>
    </div>

    <!-- GENERAL -->
    <script src="{{ url_for('static', filename='js/general/element-dictionary.js') }}"></script>
    <script src="{{ url_for('static', filename='js/general/apply-state.js') }}"></script>
    <script src="{{ url_for('static', filename='js/general/refresh-assets.js') }}"></script>
    <script src="{{ url_for('static', filename='js/general/display-output.js') }}"></script>
    <script src="{{ url_for('static', filename='js/general/transform-history.js') }}"></script>
    <script src="{{ url_for('static', filename='js/general/update-progress.js') }}"></script>
    <script src="{{ url_for('static', filename='js/general/save-state.js') }}"></script>

    <!-- COMPONENTS -->
    <script src="{{ url_for('static', filename='js/components/custom-elements.js') }}"></script>
    <script src="{{ url_for('static', filename='js/components/image-albums.js') }}"></script>
    <script src="{{ url_for('static', filename='js/components/image-size-viewer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/components/model-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/components/resize-panels.js') }}"></script>
    <script src="{{ url_for('static', filename='js/components/user-preferences.js') }}"></script>

    <!-- WORKSPACES -->
    <script src="{{ url_for('static', filename='js/workspaces/compose-workspace.js') }}"></script>
    <script src="{{ url_for('static', filename='js/workspaces/transform-workspace.js') }}"></script>
    <script src="{{ url_for('static', filename='js/workspaces/enhance-workspace.js') }}"></script>
    <script src="{{ url_for('static', filename='js/workspaces/infinite-canvas.js') }}"></script>
    <script src="{{ url_for('static', filename='js/workspaces/switch-workspace.js') }}"></script>

    <!-- INFERENCE -->
    <script src="{{ url_for('static', filename='js/inference/txt2img-request.js') }}"></script>
    <script src="{{ url_for('static', filename='js/inference/img2img-request.js') }}"></script>
    <script src="{{ url_for('static', filename='js/inference/inpaint-request.js') }}"></script>
    <script src="{{ url_for('static', filename='js/inference/upscale-request.js') }}"></script>
    <script src="{{ url_for('static', filename='js/inference/inference-queue.js') }}"></script>

    <!-- EVENTS -->
    <script src="{{ url_for('static', filename='js/events/incoming-events.js') }}"></script>
    <script src="{{ url_for('static', filename='js/events/outgoing-events.js') }}"></script>
</body>

</html>